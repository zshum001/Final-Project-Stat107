---
title: "Stat107 Final Project"
subtitle: "How do harmful air pollutant concentrations vary across different months within a year?"
author: "Crystal Kuong, Gracelynne Mohad, Sumeet Sammi, Zoe Shum"
date: "2024-12-13"
format:
  html:
    toc: true
    toc-location: left
    embed-resources: true
    code-line-numbers: true
    page-layout: full
  pdf:
    fontsize: 10pt
    code-line-numbers: true
---

# Introduction

Air quality is a critical component in environmental health, directly influencing both the ecosystem and human well-being. It is determined by the presence of various pollutants including, but not limited to nitrogen dioxide and carbon monoxide. Poor air quality is linked to serious health issues, including respiratory diseases, cardiovascular problems, and reduced life expectancy. Moreover, air pollution contributes to climate change and harming wildlife. Monitoring and understanding air quality prompts initiatives centered on reducing the concentration of air pollutants, thereby, creating a cleaner environment.

## The Dataset

The UCI Air Quality Dataset was collected by the University of California, Irvine and acquired from Kaggle. It measures the concentration of about 5 different pollutants in the air in a given area. Some pollutants that are measured include carbon monoxide, benzene, and nitrogen dioxide. It measures pollutant concentrations every hour from March 2004 to April 2005.

### Loading Libraries 

```{r}
library(readxl)
library(ggplot2)
library(lubridate)
library(tidyverse)
```

### Reading dataset

```{r}
air <- read_excel("AirQualityUCI.xls")
head(air)

# Number of rows and columns
dim(air)

# Column names
colnames(air)
```

The original dataset contains 9,357 observations and 15 variables.

1.  `Date`: The date of the measurement

2.  `Time`: The time of the measurement.

3.  `CO(GT)`: Concentration of carbon monoxide (CO) in the air (µg/m³).

4.  `PT0.S1(CO)`: Sensor measurement for CO concentration.

5.  `NMHC(GT)`: Concentration of non-methane hydrocarbons (NMHC) (µg/m³).

6.  `C6H6(GT)`: Concentration of benzene (C6H6) in the air (µg/m³).

7.  `PT08.S2(NMHC)`: Sensor measurement for NMHC concentration.

8.  `NOx(GT)`: Concentration of nitrogen oxides (NOx) in the air (µg/m³).

9.  `PT08.S3(NOx)`: Sensor measurement for NOx concentration.

10. `NO2(GT)`: Concentration of nitrogen dioxide (NO2) in the air (µg/m³).

11. `PT08.S4(NO2)`: UNKNOWN

12. `PT08.S5(03)`: UNKNOWN

13. `T`: UNKNOWN

14. `RH`: UNKNOWN

15. `AH`: UNKNOWN

Descriptions for variables 11-15 were not specified by the author, hence they will be omitted in the analysis. Additionally, variables will be renamed to enhance clarity.

## Plan for Analysis

# Analysis

```{r}
# Convert 'Date' column to date format
air$Date <- ymd(air$Date) # "Parse dates with *y*ear, *m*onth, and *d*ay components"
air$Date <- format(air$Date, "%Y-%m") # Formats Date to YYYY-mm

# Group by Date, where the average is calculated for each numeric column across all month groups, while removing all NA values
# summarize(): creates a new condensed dataset 
airM <- air %>%
  group_by(Date) %>%
  summarize(across(where(is.numeric), ~mean(., na.rm = TRUE))
)
head(airM, 5)

# Do same for individual days 
airD <- air %>%
  group_by(Date) %>%
  summarize(across(where(is.numeric), ~mean(., na.rm = TRUE))
)
head(airD, 10)
```

```{r}
# Create plot (average concentration of CO across months)
ggplot(airM, aes(x = Date, y =`CO(GT)`)) +
  geom_point() +
  labs(title = "Avergae concentration of Carbon Monoxide by Month",
       x = "Date",
       y = "Concentration of CO in µg/m³")

# Create plot (average concentration of CO across days)
ggplot(airD, aes(x = Date, y =`CO(GT)`)) +
  geom_point() +
  labs(title = "Avergae concentration of Carbon Monoxide by Day",
       x = "Date",
       y = "Concentration of CO in µg/m³")
```
